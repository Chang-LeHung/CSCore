# ç»„åˆ

## å‰è¨€

å·²ç»å¥½ä¹…æ²¡æœ‰æ›´æ–°äº†ğŸ¤£ï¼Œä»ä»Šå¤©å¼€å§‹è¦ä¿è¯æ¯å‘¨çš„æ›´æ–°é¢‘ç‡äº†ï¼ˆç«‹ä¸ªflagï¼Œåº”è¯¥èƒ½å¤Ÿæƒ³åˆ°æ‰“è„¸ä¼šæ¥çš„å¾ˆå¿«ğŸ˜‚ï¼‰ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€é“`LeetCode`ç®—æ³•é¢˜ï¼Œé¢˜ç›®ä¸æ˜¯å¾ˆå›°éš¾ï¼Œä½†æ˜¯ä»è¿™åˆ°ç®€å•çš„é¢˜ç›®æˆ‘ä»¬å¯ä»¥åˆ†æå‡ºå›æº¯ç®—æ³•çš„å‡ ä¸ªæ ¸å¿ƒè¦ç‚¹ï¼Œä»¥åé‡åˆ°éœ€è¦å›æº¯çš„é¢˜ç›®å¯ä»¥åº”å¯¹çš„æ€è·¯ï¼ŒçŸ¥é“åº”è¯¥æ€ä¹ˆæ€è€ƒï¼Œæœä»€ä¹ˆæ–¹å‘å»å¯»æ‰¾è§£å†³é—®é¢˜çš„å‡ºå£ï¼

## [é¢˜ç›®](https://leetcode.cn/problems/combinations/)

>ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å›èŒƒå›´ `[1, n]` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚ä½ å¯ä»¥æŒ‰ **ä»»ä½•é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

ä¾‹å­ï¼š

```java
è¾“å…¥ï¼šn = 4, k = 2
è¾“å‡ºï¼š
[
  [2,4],
  [3,4],
  [2,3],
  [1,2],
  [1,3],
  [1,4],
]
```



## è§£æ³•

ä¹ä¸€çœ‹è¿™é“é¢˜å¥½åƒæ˜¯ä¸€ä¸ªå¾ˆç›´æ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦ä»[1, n]å½“ä¸­é€‰å‡ºkä¸ªæ•°æ®å‡ºæ¥ï¼Œæ¯”å¦‚è¯´é¢˜ç›®å½“ä¸­ç»™å‡ºçš„ï¼Œæˆ‘ä»¬éœ€è¦ä»[1, 4]è¿™ä¸ªåŒºé—´å–å‡ºä¸¤ä¸ªæ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä¸¤å±‚forå¾ªç¯å³å¯ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š

```C++
for (int i = 1; i <= n; i++) {
  	// åœ¨è¿™é‡Œé€‰æ‹© i 
    for (int j = i + 1; j <= n; j++) {
        // æ¯ä¸€æ¬¡å¾ªç¯é€‰æ‹© j 
    }
}
```



ä½†æ˜¯é—æ†¾çš„æ˜¯`k`æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå®šå€¼ï¼Œå¦‚æœä»–æ˜¯ä¸€ä¸ªå®šå€¼çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å¾ªç¯æ“ä½œå»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”æ˜¯å¾ˆé«˜æ•ˆçš„ã€‚é‚£è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³çš„ï¼Ÿæˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ•°æˆ‘ä»¬éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼šé€‰æ‹©å’Œä¸é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦éœ€è¦è®²è¿™ä¸ªæ•°æ®åŠ åˆ°é›†åˆå½“ä¸­å»ã€‚

ç°åœ¨æˆ‘ä»¬å¯¹ä¸Šè¿°ç»™å®šçš„ä¾‹å­è¿›è¡Œæ±‚è§£**ï¼ˆn = 4, k = 2ï¼‰**ï¼Œæ¯ä¸€ä¸ªæ•°æ®éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œé€‰å’Œä¸é€‰ï¼ˆå¾ˆå¤šå›æº¯çš„é—®é¢˜éƒ½æ˜¯å¯ä»¥æŒ‰ç…§è¿™ç§æ€è·¯ï¼‰å…·ä½“è¿‡ç¨‹å…¥ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­è“è‰²çš„èŠ‚ç‚¹è¡¨ç¤ºå¾…é€‰æ‹©çš„æ•°æ®ï¼Œçº¢è‰²çš„æ¡†è¡¨ç¤ºå½“å‰è¢«é€‰ä¸­çš„æ•°æ®çš„é›†åˆï¼š

![](../../images/backtrace/02.png)

ä¸Šå›¾æ˜¯ä¾‹å­çš„è§£æ ‘ï¼Œå…¶ä¸­ç»¿è‰²çš„èŠ‚ç‚¹è¡¨ç¤ºæœ€ç»ˆçš„ç­”æ¡ˆï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®éƒ½æœ‰ä¸¤ç§é€‰æ‹©åŠæ³•ï¼Œé€‰å’Œä¸é€‰ï¼Œå› æ­¤ä¸Šé¢çš„è§£å†³é—®é¢˜çš„æ ‘ç»“æ„æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨**æ·±åº¦ä¼˜å…ˆéå†**å»å®ç°ä¸Šé¢çš„è§£é¢˜è¿‡ç¨‹ã€‚ä»ä¸Šå›¾æ¥çœ‹æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›å‰ªæï¼Œå½“æˆ‘ä»¬é€‰ä¸­çš„æ•°æ®çš„ä¸ªæ•°å·²ç»è¾¾åˆ°`k`çš„æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦åœ¨è¿›è¡Œé€’å½’ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå½“è¾¾åˆ°ä¹‹åæˆ‘ä»¬ä¸éœ€è¦å†åŠ å…¥æ•°æ®äº†ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰ç»§ç»­å¾€ä¸‹éå†çš„å¿…è¦äº†ã€‚å…·ä½“çœ‹ä¸‹å›¾ï¼Œå…¶ä¸­ç´«è‰²èŠ‚ç‚¹è¡¨ç¤ºä¸éœ€è¦è¿›è¡Œé€’å½’çš„èŠ‚ç‚¹ï¼š

![](../../images/backtrace/03.png)

å› æ­¤å½“æˆ‘ä»¬é€‰ä¸­çš„å…ƒç´ è¾¾åˆ°`k`ä¸ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€€å‡ºé€’å½’ï¼Œå› æ­¤è¿™æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªé€’å½’å‡ºå£ã€‚

![](../../images/backtrace/04.png)

é™¤äº†ä¸Šé¢æåˆ°çš„é€’å½’å‡ºå£ä¹‹å¤–æˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ä¸ªéšè—çš„é€’å½’å‡ºå£ã€‚å½“æˆ‘ä»¬å½“å‰é€‰æ‹©çš„æ•°æ®çš„ä¸ªæ•°åŠ ä¸Šåé¢è¿˜å‰©ä¸‹çš„æ‰€æœ‰çš„æ•°æ®çš„æ—¶å€™è¿˜è¾¾ä¸åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®çš„ä¸ªæ•°`k`çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦åœ¨è¿›è¡Œéå†äº†ï¼Œå¯ä»¥ç›´æ¥é€€å‡ºé€’å½’äº†ã€‚

æ ¹æ®ä¸Šé¢æˆ‘ä»¬çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š

```java
public void backTrace(int n, int k, List<Integer> path,
                      int idx) {
  // idx è¡¨ç¤ºå½“å‰æ­£åœ¨éå†çš„æ•°æ®
  if (path.size() == k){ // å¦‚æœé€‰ä¸­çš„æ•°æ®ä¸ªæ•°è¾¾åˆ° k äº†é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†å½“å‰é€‰ä¸­æ•°æ®çš„é›†åˆåŠ å…¥åˆ°æˆ‘ä»¬è¿”å›çš„æ•°æ®å½“ä¸­ ans æ˜¯é€‰ä¸­çš„æ‰€æœ‰çš„æ•°æ®çš„ä¸ªæ•°ä¸º k çš„é›†åˆ
    ans.add(new ArrayList<>(path));
    return;
  } else if ((path.size() + n - idx + 1) < k)
    return;
  path.add(idx); // åŠ å…¥ä¸€ä¸ªæ•°æ® è¡¨ç¤ºé€‰æ‹©æ•°æ® idx
  backTrace(n, k, path, idx + 1);
  path.remove(path.size() - 1); // ç§»å‡ºä¸Šé¢åŠ å…¥çš„æ•°æ® è¡¨ç¤ºåœ¨è¿™é‡Œè¿›è¡Œå›æº¯ å› ä¸ºæˆ‘ä»¬æ˜¯æ·±åº¦ä¼˜å…ˆéå†ï¼Œå‰é¢å°† idx åŠ å…¥åˆ°äº† path å½“ä¸­ å½“é€’å½’è¿”å›çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å°†åŠ å…¥çš„æ•°æ®ç§»å‡º å› ä¸ºè¿™é‡Œè¡¨ç¤ºä¸é€‰æ‹©æ•°æ® idx 
  backTrace(n, k, path, idx + 1);
}
```

å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```java
class Solution {
  private List<List<Integer>> ans = new ArrayList<>();

  public List<List<Integer>> combine(int n, int k) {

    backTrace(n, k, new ArrayList<>(), 1);
    return ans;
  }

  public void backTrace(int n, int k, List<Integer> path,
                        int idx) {
    if (path.size() == k){
      ans.add(new ArrayList<>(path));
      return;
    } else if ((path.size() + n - idx + 1) < k)
      return;
    path.add(idx);
    backTrace(n, k, path, idx + 1);
    path.remove(path.size() - 1);
    backTrace(n, k, path, idx + 1);
  }

}
```

é™¤äº†ä¸Šé¢çš„å®ç°æ–¹å¼ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼å®ç°**é€‰å’Œä¸é€‰**çš„æ“ä½œã€‚å¦‚æœæˆ‘ä»¬ä¸é€‰ä¸€ä¸ªæ•°æ®çš„è¯è¡¨ç¤ºæˆ‘ä»¬åœ¨åé¢å¯¹æ•°æ®çš„é€‰æ‹©è¿‡ç¨‹å½“ä¸­å°±ä¸ä¼šé€‰åˆ°è¿™ä¸ªæ•°æ®äº†ï¼Œæˆ‘ä»¬å¦å¤–ä¸€ç§å®ç°æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œå¯èƒ½çœ‹ä»£ç ä¸èƒ½å¤Ÿå¾ˆå¥½çš„ç†è§£ï¼Œå¯ä»¥ç»“åˆåé¢çš„é—®é¢˜å’Œå›¾è¿›è¡Œç†è§£ï¼š

```java
public void backtrace(int n, int k,
                      int startPosition) {
  if (path.size() == k) {
    res.add(new ArrayList<>(path));
    return;
  }
  for (int i = startPosition; i <= n; i++) {
    path.add(i);
    backtrace(n, k, i + 1);
    path.remove(path.size() - 1);
  }
}
```

![](../../images/backtrace/05.png)

åœ¨ä¸Šé¢çš„å›¾å½“ä¸­ï¼Œæ•°æ®1åœ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‡ºç°ä¹‹åä¸ä¼šåœ¨åé¢çš„èŠ‚ç‚¹å†å‡ºç°äº†ï¼Œæ•°æ®2åœ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹å‡ºç°ä¹‹åå°±ä¸ä¼šåœ¨å‡ºç°äº†ï¼Œæ•°æ®3åœ¨ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹å‡ºç°ä¹‹åå°±ä¸ä¼šåœ¨å‡ºç°äº†ï¼Œ......

å¯èƒ½ä½ ä¼šæœ‰ç–‘é—®ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿä¸ºä»€ä¹ˆè¿™æ ·è¿›è¡Œé€‰æ‹©å’Œ**é€‰å’Œä¸é€‰**å¾—åˆ°çš„ç»“æœä¸€æ ·å‘¢ï¼Ÿ

- å…¶å®ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯é€‰æ‹©æ•°æ®1å¾—åˆ°çš„æ‰€æœ‰çš„ç»“æœï¼Œè¡¨ç¤ºé€‰æ‹©æ•°æ®1ï¼Œåé¢çš„æ‰€æœ‰çš„èŠ‚ç‚¹å°±è¡¨ç¤ºä¸é€‰æ‹©æ•°æ®1ã€‚
- å‰é¢ä¸¤ä¸ªèŠ‚ç‚¹è¡¨ç¤ºé€‰æ‹©æ•°æ®2å¾—åˆ°çš„æ‰€æœ‰çš„ç»“æœï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹ä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹è¡¨ç¤ºä¸é€‰æ‹©2å¾—åˆ°çš„ç»“æœã€‚
- å‰é¢ä¸‰ä¸ªèŠ‚ç‚¹è¡¨ç¤ºé€‰æ‹©æ•°æ®3å¾—åˆ°çš„æ‰€æœ‰çš„ç»“æœï¼Œç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ä¹‹åæ‰€æœ‰çš„èŠ‚ç‚¹è¡¨ç¤ºä¸é€‰æ‹©3å¾—åˆ°çš„ç»“æœã€‚

## ä»£ç å®ç°

### C++å®ç°

#### å®ç°æ–¹å¼2

```c++
class Solution {
    vector<vector<int>> ans;
public:
    vector<vector<int>> combine(int n, int k) {
      backtrace(n, k, vector<int>());
      return ans;
    }

    void backtrace(int n, int k, vector<int> tmp, int cur=1) {
      if (tmp.size() == k) {
        ans.push_back(tmp);
        return;
      }
      if (tmp.size() + (n - cur) + 1 < k)
        return;
      tmp.push_back(cur);
      backtrace(n, k, tmp, cur + 1);
      tmp.pop_back();
      backtrace(n ,k, tmp, cur + 1);
    }
};

```

#### å®ç°æ–¹å¼2

```c++


#include <vector>

using namespace std;
class Solution {
    vector<vector<int>> ans;
public:
    vector<vector<int>> combine(int n, int k) {
      backtrace(n, k, vector<int>());
      return ans;
    }

    void backtrace(int n, int k, vector<int> tmp, int cur=1) {
      if (tmp.size() == k) {
        ans.push_back(tmp);
        return;
      }
      for (int i = cur; i <= n - (k - tmp.size()) + 1 ; ++i) {
        tmp.push_back(i);
        backtrace(n, k, tmp, i + 1);
        tmp.pop_back();
      }
    }
};
```

### Javaå®ç°

#### å®ç°æ–¹å¼1

```java
class Solution {
  private List<List<Integer>> ans = new ArrayList<>();

  public List<List<Integer>> combine(int n, int k) {

    backTrace(n, k, new ArrayList<>(), 1);
    return ans;
  }

  public void backTrace(int n, int k, List<Integer> path,
                        int idx) {
    if (path.size() == k){
      ans.add(new ArrayList<>(path));
      return;
    } else if ((path.size() + n - idx + 1) < k)
      return;
    path.add(idx);
    backTrace(n, k, path, idx + 1);
    path.remove(path.size() - 1);
    backTrace(n, k, path, idx + 1);
  }

}
```

#### å®ç°æ–¹å¼2

```java
class Solution {
    private List<List<Integer>> res = new ArrayList<>();
    private List<Integer> path = new ArrayList<>();
    public List<List<Integer>> combine(int n, int k) {

        backtrace(n, k, 1);
        return res;
    }

    public void backtrace(int n, int k,
                          int startPosition) {
        if (path.size() == k) {
            res.add(new ArrayList<>(path));
            return;
        }
        for (int i = startPosition; i <= n; i++) {
            path.add(i);
            backtrace(n, k, i + 1);
            path.remove(path.size() - 1);
        }
    }

}
```


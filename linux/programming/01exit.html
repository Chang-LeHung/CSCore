
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>C语言中这么骚的退出程序的方式你知道几个？ · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="02sgementation.html" />
    
    
    <link rel="prev" href="../command/06kill.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    基础容器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../container/01-链表设计与实现.html">
            
                <a href="../../container/01-链表设计与实现.html">
            
                    
                    链表设计与Java实现——自己动手写LinkedList
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../container/02-linkedlist源码剖析.html">
            
                <a href="../../container/02-linkedlist源码剖析.html">
            
                    
                    LinekdList源码深度剖析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../container/03-array容器设计与实现.html">
            
                <a href="../../container/03-array容器设计与实现.html">
            
                    
                    数组容器(ArrayList)设计与Java实现——自己动手写ArrayList
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../container/04-arraylist源码剖析.html">
            
                <a href="../../container/04-arraylist源码剖析.html">
            
                    
                    ArrayList源码剖析，从扩容原理，到迭代器和fast-fail机制，你想要的这都有！！！
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../container/05-hashmap设计与实现.html">
            
                <a href="../../container/05-hashmap设计与实现.html">
            
                    
                    HashMap设计原理与实现（上篇）——哈希表的原理，如何从0到1设计一个HashMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../container/06-hashmap设计与实现.html">
            
                <a href="../../container/06-hashmap设计与实现.html">
            
                    
                    HashMap设计原理与实现（下篇）200行代码带你写自己的HashMap！！！
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../container/07-hashmap源码剖析.html">
            
                <a href="../../container/07-hashmap源码剖析.html">
            
                    
                    HashMap源码深度剖析，手把手带你分析每一行代码，包会！！！
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../../container/08-arraydeque源码剖析.html">
            
                <a href="../../container/08-arraydeque源码剖析.html">
            
                    
                    ArrayDeque（JDK双端队列）源码深度剖析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../../container/09-arrayqueue源码剖析.html">
            
                <a href="../../container/09-arrayqueue源码剖析.html">
            
                    
                    深入剖析（JDK）ArrayQueue 源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    高级容器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../concurrency/java/11blockingqueue.html">
            
                <a href="../../concurrency/java/11blockingqueue.html">
            
                    
                    从零开始自己动手写阻塞队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../concurrency/java/12blockingqueuesrc.html">
            
                <a href="../../concurrency/java/12blockingqueuesrc.html">
            
                    
                    JDK数组阻塞队列源码深入剖析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    动态规划
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../da/01-动态规划.html">
            
                <a href="../../da/01-动态规划.html">
            
                    
                    庖丁解牛斐波拉契数列和背包问题——详细解析两个问题优化过程（超多问题优化干货，不看血亏），带你从最基本最核心的问题看懂动态规划！！
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../da/02-01背包问题.html">
            
                <a href="../../da/02-01背包问题.html">
            
                    
                    你真的懂01背包问题吗？01背包的这几问你能答出来吗？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../da/03完全背包.html">
            
                <a href="../../da/03完全背包.html">
            
                    
                    面试官：完全背包都不会，是你自己走还是我送你？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../da/04多重背包v1.html">
            
                <a href="../../da/04多重背包v1.html">
            
                    
                    深入剖析多重背包问题（上篇）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../da/04多重背包v2.html">
            
                <a href="../../da/04多重背包v2.html">
            
                    
                    深入剖析多重背包问题（下篇）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../../da/14深入剖析完全背包.html">
            
                <a href="../../da/14深入剖析完全背包.html">
            
                    
                    完全背包转化为多重背包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../../da/13零钱兑换.html">
            
                <a href="../../da/13零钱兑换.html">
            
                    
                    深入浅出零钱兑换问题——背包问题的套壳
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../../da/05深入剖析斐波拉契数列.html">
            
                <a href="../../da/05深入剖析斐波拉契数列.html">
            
                    
                    深入剖析斐波拉契数列
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    股票问题
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../da/09状态机动态规划.html">
            
                <a href="../../da/09状态机动态规划.html">
            
                    
                    这种动态规划你见过吗——状态机动态规划之股票问题(上)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../da/10状态机动态规划02.html">
            
                <a href="../../da/10状态机动态规划02.html">
            
                    
                    这种动态规划你见过吗——状态机动态规划之股票问题(中)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../da/11状态机动态规划03.html">
            
                <a href="../../da/11状态机动态规划03.html">
            
                    
                    这种动态规划你见过吗——状态机动态规划之股票问题(下)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../da/12状态机动态规划总结.html">
            
                <a href="../../da/12状态机动态规划总结.html">
            
                    
                    状态机动态规划之股票问题总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    回溯
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../da/backtrace/01combinations.html">
            
                <a href="../../da/backtrace/01combinations.html">
            
                    
                    通过组合问题看透回溯法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    数据结构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../da/07表达式求值.html">
            
                <a href="../../da/07表达式求值.html">
            
                    
                    深入剖析前缀、中缀、后缀表达式以及表达式求值
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    并发
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../concurrency/java/01初始java并发.html">
            
                <a href="../../concurrency/java/01初始java并发.html">
            
                    
                    并发开篇——带你从0到1建立并发知识体系的基石
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../concurrency/java/02并发的噩梦.html">
            
                <a href="../../concurrency/java/02并发的噩梦.html">
            
                    
                    并发程序的噩梦——数据竞争
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../concurrency/java/03自己动手写并发工具类.html">
            
                <a href="../../concurrency/java/03自己动手写并发工具类.html">
            
                    
                    30行自己写并发工具类(Semaphore, CyclicBarrier, CountDownLatch)是什么体验?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../../concurrency/java/04volatile.html">
            
                <a href="../../concurrency/java/04volatile.html">
            
                    
                    万字长文：从计算机本源深入探寻volatile和Java内存模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../../concurrency/java/05falsesharing.html">
            
                <a href="../../concurrency/java/05falsesharing.html">
            
                    
                    并发刺客（False Sharing）——并发程序的隐藏杀手
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../../concurrency/java/06futuretask.html">
            
                <a href="../../concurrency/java/06futuretask.html">
            
                    
                    60行从零开始自己动手写FutureTask是什么体验？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../../concurrency/java/07futuretasksrc.html">
            
                <a href="../../concurrency/java/07futuretasksrc.html">
            
                    
                    FutureTask源码深度剖析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="../../concurrency/java/08synchronizedusage.html">
            
                <a href="../../concurrency/java/08synchronizedusage.html">
            
                    
                    深入学习Synchronized各种使用方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="../../concurrency/java/09synchronized.html">
            
                <a href="../../concurrency/java/09synchronized.html">
            
                    
                    Synchronized锁升级原理与过程深入剖析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="../../concurrency/java/10spinlock.html">
            
                <a href="../../concurrency/java/10spinlock.html">
            
                    
                    从零开始自己动手写自旋锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="../../concurrency/java/13locksupport.html">
            
                <a href="../../concurrency/java/13locksupport.html">
            
                    
                    60行自己动手写LockSupport是什么体验？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="../../concurrency/java/14threadpool.html">
            
                <a href="../../concurrency/java/14threadpool.html">
            
                    
                    彻底了解线程池的原理——40行从零开始自己写线程池
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="../../concurrency/java/16retalkingthreadpool.html">
            
                <a href="../../concurrency/java/16retalkingthreadpool.html">
            
                    
                    再谈线程池——深入剖析线程池的前世今生
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="../../concurrency/java/17threadpoolimplementation.html">
            
                <a href="../../concurrency/java/17threadpoolimplementation.html">
            
                    
                    自己动手写乞丐版线程池
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="../../concurrency/java/18threadpoolmorecloseJDK.html">
            
                <a href="../../concurrency/java/18threadpoolmorecloseJDK.html">
            
                    
                    自己动手写线程池——向JDK线程池进发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="../../concurrency/java/11blockingqueue.html">
            
                <a href="../../concurrency/java/11blockingqueue.html">
            
                    
                    从零开始自己动手写阻塞队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.17" data-path="../../concurrency/java/12blockingqueuesrc.html">
            
                <a href="../../concurrency/java/12blockingqueuesrc.html">
            
                    
                    JDK数组阻塞队列源码深入剖析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    OpenMP
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../concurrency/openmp/01introduction.html">
            
                <a href="../../concurrency/openmp/01introduction.html">
            
                    
                    OpenMP 入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../../concurrency/openmp/02openmp.html">
            
                <a href="../../concurrency/openmp/02openmp.html">
            
                    
                    OpenMP 教程（一）——OpenMP 当中的 reduction 子句

            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../../concurrency/openmp/03runtime1.html">
            
                <a href="../../concurrency/openmp/03runtime1.html">
            
                    
                    OpenMP 常见的动态库函数使用（上）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../../concurrency/openmp/04runtime2.html">
            
                <a href="../../concurrency/openmp/04runtime2.html">
            
                    
                    Openmp 常见的动态库函数使用（下）——深入剖析锁🔒原理与实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../../concurrency/openmp/05environment.html">
            
                <a href="../../concurrency/openmp/05environment.html">
            
                    
                    Openmp 环境变量使用总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../../concurrency/openmp/06sync.html">
            
                <a href="../../concurrency/openmp/06sync.html">
            
                    
                    深入理解 OpenMP 线程同步机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../../concurrency/openmp/07atomic.html">
            
                <a href="../../concurrency/openmp/07atomic.html">
            
                    
                    OpenMP 原子指令设计与实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../../concurrency/openmp/08parallel.html">
            
                <a href="../../concurrency/openmp/08parallel.html">
            
                    
                    Parallel Construct 实现原理与源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../../concurrency/openmp/09sync.html">
            
                <a href="../../concurrency/openmp/09sync.html">
            
                    
                    OpenMP 线程同步 Construct 实现原理以及源码分析（上）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../../concurrency/openmp/10sync.html">
            
                <a href="../../concurrency/openmp/10sync.html">
            
                    
                    OpenMP 线程同步 Construct 实现原理以及源码分析（下）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../../concurrency/openmp/11for_dynamic.html">
            
                <a href="../../concurrency/openmp/11for_dynamic.html">
            
                    
                    OpenMP For Construct dynamic 调度方式实现原理和源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../../concurrency/openmp/12guided.html">
            
                <a href="../../concurrency/openmp/12guided.html">
            
                    
                    OpenMP For Construct guided 调度方式实现原理和源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.13" data-path="../../concurrency/openmp/13seciton.html">
            
                <a href="../../concurrency/openmp/13seciton.html">
            
                    
                    OpenMP Sections Construct 实现原理以及源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.14" data-path="../../concurrency/openmp/14task.html">
            
                <a href="../../concurrency/openmp/14task.html">
            
                    
                    OpenMP task construct 实现原理以及源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Pthread
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../../concurrency/pthread/01pthread.html">
            
                <a href="../../concurrency/pthread/01pthread.html">
            
                    
                    Pthread 并发编程（一）——深入剖析线程基本元素和状态
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../../concurrency/pthread/02pthread.html">
            
                <a href="../../concurrency/pthread/02pthread.html">
            
                    
                    Pthread 并发编程（二）——自底向上深入理解线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../../concurrency/pthread/03pthread.html">
            
                <a href="../../concurrency/pthread/03pthread.html">
            
                    
                    Pthread 并发编程（三）——深入理解线程取消机制
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    Makefile
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../../tools/makefile/01.html">
            
                <a href="../../tools/makefile/01.html">
            
                    
                    彻底掌握Makefile（一）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../../tools/makefile/02.html">
            
                <a href="../../tools/makefile/02.html">
            
                    
                    彻底掌握Makefile（二）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../../tools/makefile/03.html">
            
                <a href="../../tools/makefile/03.html">
            
                    
                    彻底掌握Makefile（三）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    DES
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../../des/des.html">
            
                <a href="../../des/des.html">
            
                    
                    DES加密算法从入门到入坟
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    命令行&系统编程&SHELL
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../command/01top.html">
            
                <a href="../command/01top.html">
            
                    
                    Linux命令系列之top——里面藏着很多鲜为人知的宝藏知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../command/02ls.html">
            
                <a href="../command/02ls.html">
            
                    
                    Linux命令系列之ls——原来最简单的ls这么复杂
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../command/03mkls.html">
            
                <a href="../command/03mkls.html">
            
                    
                    自己动手写ls命令——Java版
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../command/05ps.html">
            
                <a href="../command/05ps.html">
            
                    
                    这才是使用ps命令的正确姿势
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../command/06kill.html">
            
                <a href="../command/06kill.html">
            
                    
                    如何优雅的杀掉一个进程
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.13.6" data-path="01exit.html">
            
                <a href="01exit.html">
            
                    
                    C语言中这么骚的退出程序的方式你知道几个？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.7" data-path="02sgementation.html">
            
                <a href="02sgementation.html">
            
                    
                    你的哪些骚操作会导致Segmentation Fault😂
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.8" data-path="03segprincinple.html">
            
                <a href="03segprincinple.html">
            
                    
                    深入剖析Sgementation fault原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.9" data-path="04processdie.html">
            
                <a href="04processdie.html">
            
                    
                    进程最后的遗言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.10" data-path="../command/04exitstatus.html">
            
                <a href="../command/04exitstatus.html">
            
                    
                    Shell揭秘——程序退出状态码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.11" data-path="../shell/01jobcontrol.html">
            
                <a href="../shell/01jobcontrol.html">
            
                    
                    你在终端启动的进程，最后都是什么下场？（上）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.12" data-path="../shell/02jobcontrol.html">
            
                <a href="../shell/02jobcontrol.html">
            
                    
                    你在终端启动的进程，最后都是什么下场？（下）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    计算机系统基础
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../../pl/c_cpp/01builtin.html">
            
                <a href="../../pl/c_cpp/01builtin.html">
            
                    
                    gcc 好玩的 builtin 函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
                <span>
            
                    
                    python
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../../pl/python/misc/01copy.html">
            
                <a href="../../pl/python/misc/01copy.html">
            
                    
                    深入理解 python 对象拷贝和内存布局
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >C语言中这么骚的退出程序的方式你知道几个？</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="c&#x8BED;&#x8A00;&#x4E2D;&#x8FD9;&#x4E48;&#x9A9A;&#x7684;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#x7684;&#x65B9;&#x5F0F;&#x4F60;&#x77E5;&#x9053;&#x51E0;&#x4E2A;&#xFF1F;">C&#x8BED;&#x8A00;&#x4E2D;&#x8FD9;&#x4E48;&#x9A9A;&#x7684;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#x7684;&#x65B9;&#x5F0F;&#x4F60;&#x77E5;&#x9053;&#x51E0;&#x4E2A;&#xFF1F;</h1>
<h2 id="&#x524D;&#x8A00;">&#x524D;&#x8A00;</h2>
<p>&#x5728;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x5F53;&#x4E2D;&#x4E3B;&#x8981;&#x7ED9;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;C&#x8BED;&#x8A00;&#x5F53;&#x4E2D;&#x4E00;&#x4E9B;&#x4E0D;&#x5E38;&#x7528;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6BD4;&#x5982;&#x5728;<code>main</code>&#x51FD;&#x6570;&#x4E4B;&#x524D;&#x548C;&#x4E4B;&#x540E;&#x8BBE;&#x7F6E;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4EE5;&#x53CA;&#x5404;&#x79CD;&#x82B1;&#x5F0F;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<h2 id="main&#x51FD;&#x6570;&#x662F;&#x6700;&#x5148;&#x6267;&#x884C;&#x548C;&#x6700;&#x540E;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#x5417;&#xFF1F;">main&#x51FD;&#x6570;&#x662F;&#x6700;&#x5148;&#x6267;&#x884C;&#x548C;&#x6700;&#x540E;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#x5417;&#xFF1F;</h2>
<h3 id="c&#x8BED;&#x8A00;&#x6784;&#x9020;&#x548C;&#x6790;&#x6784;&#x51FD;&#x6570;">C&#x8BED;&#x8A00;&#x6784;&#x9020;&#x548C;&#x6790;&#x6784;&#x51FD;&#x6570;</h3>
<p>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5728;&#x5199;C&#x7A0B;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x662F;&#x4ECE;<code>main</code>&#x51FD;&#x6570;&#x5F00;&#x59CB;&#x5199;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x6CA1;&#x4EBA;&#x6709;&#x5173;&#x5FC3;&#x8FC7;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#x662F;main&#x51FD;&#x6570;&#x4E0D;&#x662F;&#x7A0B;&#x5E8F;&#x7B2C;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x7A0B;&#x5E8F;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="lang-C">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((constructor)) init1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;before main funciton\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main funciton\n&quot;</span>);
}
</code></pre>
<p>&#x6211;&#x4EEC;&#x7F16;&#x8BD1;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x7136;&#x540E;&#x6267;&#x884C;&#xFF0C;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code class="lang-shell">&#x279C;  code git:(main) ./init.out 
before main funciton
this is main funciton
</code></pre>
<p>&#x7531;&#x6B64;&#x53EF;&#x89C1;main&#x51FD;&#x6570;&#x5E76;&#x4E0D;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x88AB;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x7A0B;&#x5E8F;&#x7B2C;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x5F88;&#x7B80;&#x5355;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x7A0B;&#x5E8F;&#x7684;&#x8C03;&#x7528;&#x6808;&#x5373;&#x53EF;&#x3002;</p>
<p><img src="../../images/programming/01.png" alt="01"></p>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x679C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x7A0B;&#x5E8F;&#x7B2C;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#x662F;<code>_start</code>&#xFF0C;&#x8FD9;&#x662F;&#x5728;&#x7C7B;Unix&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0A;&#x6267;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x90A3;&#x4E48;main&#x51FD;&#x6570;&#x662F;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5417;&#xFF1F;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((constructor)) init() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init\n&quot;</span>);
}


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x7A0B;&#x5E8F;&#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-shell">&#x279C;  code git:(main) ./out.out 
this is init
this is main
this is exit
</code></pre>
<p>&#x7531;&#x6B64;&#x53EF;&#x89C1;main&#x51FD;&#x6570;&#x4E5F;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x6700;&#x540E;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#xFF01;&#x4E8B;&#x5B9E;&#x4E0A;&#x6211;&#x4EEC;&#x9664;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x5916;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;libc&#x5F53;&#x4E2D;&#x6CE8;&#x518C;&#x4E00;&#x4E9B;&#x51FD;&#x6570;&#xFF0C;&#x8BA9;&#x7A0B;&#x5E8F;&#x5728;main&#x51FD;&#x6570;&#x4E4B;&#x540E;&#xFF0C;&#x9000;&#x51FA;&#x6267;&#x884C;&#x524D;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x3002;</p>
<h3 id="onexit&#x548C;atexit&#x51FD;&#x6570;">on_exit&#x548C;atexit&#x51FD;&#x6570;</h3>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x7684;&#x6CE8;&#x518C;&#xFF0C;&#x8BA9;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;&#x51FD;&#x6570;</p>
<pre><code class="lang-C">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((constructor)) init() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  on_exit(on__exit, <span class="hljs-literal">NULL</span>);
  atexit(at__exit);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="lang-shell">this is init
this is main
this in at exit
this in on exit
this is exit
</code></pre>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ED4;&#x7EC6;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x4E0A;&#x9762;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x987A;&#x5E8F;&#x3002;&#x9996;&#x5148;&#x662F;&#x6267;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C; atexit &#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x518D;&#x6267;&#x884C; on_exit &#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x6700;&#x540E;&#x6267;&#x884C;&#x6790;&#x6784;&#x51FD;&#x6570;&#x3002;&#x4ECE;&#x4E0A;&#x9762;&#x7A0B;&#x5E8F;&#x7684;&#x8F93;&#x51FA;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#x751F;&#x6548;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5148;&#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#x540E;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x4F7F;&#x7528; atexit &#x8FD8;&#x662F; on_exit &#x51FD;&#x6570;&#x3002;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code class="lang-C">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((constructor)) init() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// &#x8C03;&#x6362;&#x4E0B;&#x9762;&#x4E24;&#x884C;&#x7684;&#x987A;&#x5E8F;</span>
  atexit(at__exit);
  on_exit(on__exit, <span class="hljs-literal">NULL</span>);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-shell">this is init
this is main
this in on exit
this in at exit
this is exit
</code></pre>
<p>&#x4ECE;&#x8F93;&#x51FA;&#x7684;&#x7ED3;&#x679C;&#x770B;&#x786E;&#x5B9E;&#x548C;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x7684;&#x89C4;&#x5219;&#x4E00;&#x6837;&#xFF0C;&#x5148;&#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#x540E;&#x6267;&#x884C;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x518D;linux&#x7A0B;&#x5E8F;&#x5458;&#x5F00;&#x53D1;&#x624B;&#x518C;&#x91CC;&#x9762;&#x4E5F;&#x63D0;&#x5230;&#x4E86;&#x3002;</p>
<p><img src="../../images/programming/02.png" alt="01"></p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x70B9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5C3D;&#x53EF;&#x80FD;&#x4F7F;&#x7528;atexit&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528;on_exit&#x51FD;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;atexit&#x51FD;&#x6570;&#x662F;&#x6807;&#x51C6;&#x89C4;&#x5B9A;&#x7684;&#xFF0C;&#x800C;on_exit&#x5E76;&#x4E0D;&#x662F;&#x6807;&#x51C6;&#x89C4;&#x5B9A;&#x7684;&#x3002;</p>
<h3 id="exit&#x548C;exit&#x51FD;&#x6570;">exit&#x548C;_exit&#x51FD;&#x6570;</h3>
<p>&#x5176;&#x4E2D;exit&#x51FD;&#x6570;&#x662F;libc&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x6B63;&#x5E38;&#x7684;&#x7EC8;&#x6B62;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E14;&#x6211;&#x4EEC;&#x5728;&#x524D;&#x9762;&#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#x8FD8;&#x662F;&#x80FD;&#x591F;&#x88AB;&#x6267;&#x884C;&#x3002;&#x6BD4;&#x5982;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5F53;&#x4E2D;&#xFF1A;</p>
<pre><code class="lang-C">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit1\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit2\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init1\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit2\n&quot;</span>);
}


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// _exit(1);</span>
  on_exit(on__exit1, <span class="hljs-literal">NULL</span>);
  on_exit(on__exit2, <span class="hljs-literal">NULL</span>);
  atexit(at__exit1);
  atexit(at__exit2);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x51FD;&#x6570;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code class="lang-shell">this is init1
this is init2
this is main
this in at exit2
this in at exit1
this in on exit2
this in on exit1
this is exit2
this is exit1
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x88AB;&#x6B63;&#x5E38;&#x6267;&#x884C;&#x5566;&#x3002;</p>
<p>&#x4F46;&#x662F;_exit&#x662F;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#x7A0B;&#x5E8F;&#x4F1A;&#x88AB;&#x76F4;&#x63A5;&#x7EC8;&#x6B62;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code class="lang-c">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit1\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit2\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init1\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit2\n&quot;</span>);
}


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// _exit(1);</span>
  on_exit(on__exit1, <span class="hljs-literal">NULL</span>);
  on_exit(on__exit2, <span class="hljs-literal">NULL</span>);
  atexit(at__exit1);
  atexit(at__exit2);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  _exit(<span class="hljs-number">1</span>); <span class="hljs-comment">// &#x53EA;&#x6539;&#x4E86;&#x8FD9;&#x4E2A;&#x51FD;&#x6570; &#x4ECE; exit &#x53D8;&#x6210; _exit</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code class="lang-shell">this is init1
this is init2
this is main
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x6CE8;&#x518C;&#x7684;&#x51FD;&#x6570;&#x548C;&#x6700;&#x7EC8;&#x7684;&#x6790;&#x6784;&#x51FD;&#x6570;&#x90FD;&#x6CA1;&#x6709;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x9000;&#x51FA;&#x5566;&#x3002;</p>
<h3 id="&#x82B1;&#x5F0F;&#x9000;&#x51FA;">&#x82B1;&#x5F0F;&#x9000;&#x51FA;</h3>
<p>&#x51FA;&#x4E86;&#x4E0A;&#x9762;&#x7684;<code>_exit</code>&#x51FD;&#x6570;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x5F0F;&#x76F4;&#x63A5;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<pre><code class="lang-c">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/syscall.h&gt;</span> </span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit1\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit2\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init1\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit2\n&quot;</span>);
}


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// _exit(1);</span>
  on_exit(on__exit1, <span class="hljs-literal">NULL</span>);
  on_exit(on__exit2, <span class="hljs-literal">NULL</span>);
  atexit(at__exit1);
  atexit(at__exit2);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  syscall(SYS_exit, <span class="hljs-number">1</span>); <span class="hljs-comment">// &#x548C; _exit &#x6548;&#x679C;&#x4E00;&#x6837;</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x51FA;&#x4E86;&#x4E0A;&#x9762;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x7684;&#x65B9;&#x6CD5;&#x9000;&#x51FA;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5185;&#x8054;&#x6C47;&#x7F16;&#x9000;&#x51FA;&#x51FD;&#x6570;&#xFF0C;&#x6BD4;&#x5982;&#x5728;64&#x4F4D;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<pre><code class="lang-shell">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/syscall.h&gt; 

void __attribute__((destructor)) __exit1() {
  printf(&quot;this is exit1\n&quot;);
}

void __attribute__((destructor)) __exit2() {
  printf(&quot;this is exit2\n&quot;);
}


void __attribute__((constructor)) init1() {
  printf(&quot;this is init1\n&quot;);
}


void __attribute__((constructor)) init2() {
  printf(&quot;this is init2\n&quot;);
}

void on__exit1() {
  printf(&quot;this in on exit1\n&quot;);
}

void at__exit1() {
  printf(&quot;this in at exit1\n&quot;);
}

void on__exit2() {
  printf(&quot;this in on exit2\n&quot;);
}

void at__exit2() {
  printf(&quot;this in at exit2\n&quot;);
}


int main() {
  // _exit(1);
  on_exit(on__exit1, NULL);
  on_exit(on__exit2, NULL);
  atexit(at__exit1);
  atexit(at__exit2);
  printf(&quot;this is main\n&quot;);
  asm(
    &quot;movq $60, %%rax;&quot;
    &quot;movq $1, %%rdi;&quot;
    &quot;syscall;&quot;
    :::&quot;eax&quot;
  );
  return 0;
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x662F;&#x5728;64&#x4F4D;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#x7684;&#x6C47;&#x7F16;&#x5B9E;&#x73B0;&#xFF0C;&#x5728;64&#x4E3A;&#x7CFB;&#x7EDF;&#x4E0A;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x53F7;&#x4E3A;60&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F7F;&#x7528;32&#x4F4D;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x6C47;&#x7F16;&#x5B9E;&#x73B0;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;&#xFF0C;&#x5728;32&#x4F4D;&#x7CFB;&#x7EDF;&#x4E0A;&#x9000;&#x51FA;&#x7A0B;&#x5E8F;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x53F7;&#x7B49;&#x4E8E;1&#xFF1A;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/syscall.h&gt;</span></span>

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit1\n&quot;</span>);
}

<span class="hljs-keyword">void</span> __attribute__((destructor)) __exit2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is exit2\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init1() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init1\n&quot;</span>);
}


<span class="hljs-keyword">void</span> __attribute__((constructor)) init2() {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is init2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit1</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">on__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in on exit2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">at__exit2</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this in at exit2\n&quot;</span>);
}


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// _exit(1);</span>
  on_exit(on__exit1, <span class="hljs-literal">NULL</span>);
  on_exit(on__exit2, <span class="hljs-literal">NULL</span>);
  atexit(at__exit1);
  atexit(at__exit2);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is main\n&quot;</span>);
  <span class="hljs-function"><span class="hljs-keyword">asm</span> <span class="hljs-title">volatile</span><span class="hljs-params">(
    <span class="hljs-string">&quot;movl $1, %%eax;&quot;</span>
    <span class="hljs-string">&quot;movl $1, %%edi;&quot;</span>
    <span class="hljs-string">&quot;int $0x80;&quot;</span>
    :::<span class="hljs-string">&quot;eax&quot;</span>
  )</span></span>;
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h2>
<p>&#x5728;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x5F53;&#x4E2D;&#x4E3B;&#x8981;&#x7ED9;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;C&#x8BED;&#x8A00;&#x5F53;&#x4E2D;&#x4E00;&#x4E9B;&#x4E0E;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;&#x7684;&#x9A9A;&#x64CD;&#x4F5C;&#xFF0C;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x6709;&#x6240;&#x6536;&#x83B7;&#xFF01;</p>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x4E86;&#xFF0C;&#x6211;&#x662F;<strong>LeHung</strong>&#xFF0C;&#x6211;&#x4EEC;&#x4E0B;&#x671F;&#x518D;&#x89C1;&#xFF01;&#xFF01;&#xFF01;&#x66F4;&#x591A;&#x7CBE;&#x5F69;&#x5185;&#x5BB9;&#x5408;&#x96C6;&#x53EF;&#x8BBF;&#x95EE;&#x9879;&#x76EE;&#xFF1A;<a href="https://github.com/Chang-LeHung/CSCore" target="_blank">https://github.com/Chang-LeHung/CSCore</a></p>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;<strong>&#x4E00;&#x65E0;&#x662F;&#x5904;&#x7684;&#x7814;&#x7A76;&#x50E7;</strong>&#xFF0C;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x8BA1;&#x7B97;&#x673A;&#xFF08;Java&#x3001;Python&#x3001;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x57FA;&#x7840;&#x3001;&#x7B97;&#x6CD5;&#x4E0E;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF09;&#x77E5;&#x8BC6;&#x3002;</p>
<p><img src="../../qrcode2.jpg" alt=""></p>

<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../command/06kill.html" class="navigation navigation-prev " aria-label="Previous page: 如何优雅的杀掉一个进程">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="02sgementation.html" class="navigation navigation-next " aria-label="Next page: 你的哪些骚操作会导致Segmentation Fault😂">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"C语言中这么骚的退出程序的方式你知道几个？","level":"1.13.6","depth":2,"next":{"title":"你的哪些骚操作会导致Segmentation Fault😂","level":"1.13.7","depth":2,"path":"linux/programming/02sgementation.md","ref":"linux/programming/02sgementation.md","articles":[]},"previous":{"title":"如何优雅的杀掉一个进程","level":"1.13.5","depth":2,"path":"linux/command/06kill.md","ref":"linux/command/06kill.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["popup","fontsettings","-sharing","-livereload"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright @Chang-LeHung","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"page-treeview":{"copyright":"Copyright &#169; aleen42","minHeaderCount":"2","minHeaderDeep":"2"},"search":{},"popup":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"family":"sans","size":2,"theme":"white"},"highlight":{},"anchor-navigation-ex":{"showLevelIcon":false,"showLevel":false,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right","multipleH1":false,"multipleH2":false,"multipleH3":false,"multipleH4":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"linux/programming/01exit.md","mtime":"2025-10-03T17:39:52.152Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2025-10-03T18:28:09.654Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    

    </body>
</html>

